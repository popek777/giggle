cmake_minimum_required(VERSION 3.15)
project(giggle CXX)

add_library(giggle
  src/giggle.cpp
  src/Consumer.cpp
  src/Producer.cpp)

# Note:
# adding CMAKE_INCLUDE_PATH (which is generated by cmake toolchain file)
# is crucial to later on include conan dependency rather then a globaly
# installed library (e.g. in my case missing this in include directories made
# my library attempt to include to global kafka library rather then one 1.9.2
# one managed by conan)
target_include_directories(giggle PUBLIC include ${CMAKE_INCLUDE_PATH})

set_target_properties(giggle PROPERTIES
  PUBLIC_HEADER
  "include/giggle/giggle.h;include/giggle/Consumer.h;include/giggle/Producer.h;include/giggle/Error.h;include/giggle/Messages.h;include/giggle/AvroUtils.h")
install(TARGETS giggle)
